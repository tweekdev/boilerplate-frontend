(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13],{451:function(e,t,a){},555:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a.n(r),c=a(9),i=a(6),s=a(12),u=a(0),l=a.n(u),o=a(75),m=a(25),p=a(10),d=(a(116),a(11)),f=a(19),h=(a(451),a(27)),v=a(20),b=a(18),y=a(15);o.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(o.c.version,"/pdf.worker.js"),p.b.configure();t.default=function(){var e=Object(m.useParams)().tabsId,t=Object(u.useContext)(b.a),a=d.a().shape({chanteur:d.c().required("Veuillez entrer un chanteur.").min(4,"Le chanteur est trop court."),file:d.c(),description:d.c(),name:d.c().required("Veuillez entrer un nom."),type:d.c().required("Veuillez entrer un type."),difficulty:d.c().required("Veuillez choisir une difficult\xe9."),instrument:d.c().required()}),r=Object(y.a)(),o=r.error,E=r.sendRequest,g=r.clearError,k=Object(u.useState)(),N=Object(i.a)(k,2),j=N[0],O=N[1],x=Object(u.useState)(),w=Object(i.a)(x,2),C=w[0],S=w[1],B=Object(u.useState)(),q=Object(i.a)(B,2),V=q[0],z=q[1],F=Object(u.useState)(),H=Object(i.a)(F,2),P=H[0],A=H[1];Object(u.useEffect)((function(){var t=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/types");case 3:t=e.sent,O(t.types),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/instruments");case 3:t=e.sent,z(t.instruments),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/difficulties");case 3:t=e.sent,S(t.difficulties),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var t=Object(c.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E("/api/tweektabs/tabs/".concat(e));case 3:a=t.sent,A(a.tabs),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t(),a(),r(),i()}),[E,e]);var D=Object(m.useHistory)(),J=function(){var a=Object(c.a)(n.a.mark((function a(r,c){var i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(i=new FormData).append("chanteur",r.chanteur),i.append("file",r.file),i.append("name",r.name),i.append("description",r.description),i.append("type",r.type),i.append("difficulty",r.difficulty),i.append("instrument",r.instrument),a.next=11,E("/api/tweektabs/tabs/".concat(e),"PATCH",i,{Authorization:"Bearer "+t.token});case 11:c.isSubmitting=!1,c.resetForm(),p.b.success("\ud83e\udd84 La tab a bien \xe9t\xe9 mise \xe0 jour!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),D.push("/tabs"),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),p.b.error("An error occurred!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{error:o,onClear:g}),l.a.createElement("div",{className:"main main-edit"},l.a.createElement(h.a,{className:"card-edit"},C&&j&&V&&P&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"title-edit"},"Mettre \xe0 jour"),l.a.createElement(s.b,{onSubmit:J,initialValues:{chanteur:P.chanteur,file:P.file,name:P.name,type:P.type.id,description:P.description,difficulty:P.difficulty.id,instrument:P.instrument.id},validationSchema:a},(function(e){var t=e.values,a=e.errors,r=e.touched,n=e.handleChange,c=e.handleBlur,i=e.handleSubmit,u=e.isSubmitting,o=e.setFieldValue;return l.a.createElement("form",{onSubmit:i,className:"edit-form"},l.a.createElement("div",{className:"form-group"},l.a.createElement(s.a,{className:" edit-control",type:"text",name:"chanteur",onChange:n,onBlur:c,value:t.chanteur,placeholder:"chanteur"}),l.a.createElement("div",{className:"error"},a.chanteur&&r.chanteur&&a.chanteur)),l.a.createElement("div",{className:"form-group"},l.a.createElement(s.a,{className:"edit-control",type:"text",name:"name",onChange:n,onBlur:c,value:t.name,placeholder:"Nom"}),l.a.createElement("div",{className:"error"},a.name&&r.name&&a.name)),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{id:"file",name:"file",className:"edit-control",type:"file",onChange:function(e){o("file",e.currentTarget.files[0])},values:t.file,accept:".pdf"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{className:"edit-control",type:"text",name:"description",onChange:n,onBlur:c,value:t.description,placeholder:"description"}),l.a.createElement("div",{className:"error"},a.description&&r.description&&a.description)),j&&j.length>0&&l.a.createElement("div",{className:"form-group"},l.a.createElement(s.a,{className:" edit-control",as:"select",name:"type",onChange:n,onBlur:c,value:t.type,placeholder:"type"},l.a.createElement("option",{value:""},"Choisit un type"),j.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)}))),l.a.createElement("div",{className:"error"},a.type&&r.type&&a.type)),V&&V.length>0&&l.a.createElement("div",{className:"form-group"},l.a.createElement(s.a,{className:" edit-control",as:"select",name:"instrument",onChange:n,onBlur:c,value:t.instrument,placeholder:"instrument"},l.a.createElement("option",{value:""},"Choisit une instrument"),V.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)}))),l.a.createElement("div",{className:"error"},a.instrument&&r.instrument&&a.instrument)),C&&C.length>0&&l.a.createElement("div",{className:"form-group"},l.a.createElement(s.a,{className:" edit-control",as:"select",name:"difficulty",onChange:n,onBlur:c,value:t.difficulty,placeholder:"Difficult\xe9"},l.a.createElement("option",{value:""},"Choisit une difficult\xe9"),C.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.name)}))),l.a.createElement("div",{className:"error"},a.difficulty&&r.difficulty&&a.difficulty)),l.a.createElement("div",{className:"form-group"},l.a.createElement(f.a,{type:"submit",disabled:u},"Mettre \xe0 jour")))}))))))}}}]);
//# sourceMappingURL=13.396d419e.chunk.js.map