(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[14],{451:function(e,t,a){},556:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a.n(r),c=a(9),i=a(6),l=a(12),s=a(0),u=a.n(s),o=a(25),m=a(10),p=(a(116),a(11)),d=a(19),f=(a(451),a(27)),v=a(20),h=a(18),b=a(15);m.b.configure();t.default=function(){var e=Object(o.useParams)().tutoId,t=Object(s.useContext)(h.a),a=p.a().shape({chanteur:p.c().required("Veuillez entrer un chanteur.").min(4,"Le chanteur est trop court."),link:p.c().required(),tab:p.c(),description:p.c(),name:p.c().required("Veuillez entrer un nom."),type:p.c().required("Veuillez entrer un type."),difficulty:p.c().required("Veuillez choisir une difficult\xe9."),instrument:p.c().required()}),r=Object(b.a)(),y=r.error,E=r.sendRequest,g=r.clearError,k=Object(s.useState)(),N=Object(i.a)(k,2),O=N[0],x=N[1],j=Object(s.useState)(),C=Object(i.a)(j,2),w=C[0],B=C[1],S=Object(s.useState)(),q=Object(i.a)(S,2),V=q[0],z=q[1],F=Object(s.useState)(),H=Object(i.a)(F,2),P=H[0],A=H[1];Object(s.useEffect)((function(){var t=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/types");case 3:t=e.sent,x(t.types),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/instruments");case 3:t=e.sent,z(t.instruments),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("/api/tweektabs/difficulties");case 3:t=e.sent,B(t.difficulties),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var t=Object(c.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E("/api/tweektabs/tutorials/".concat(e));case 3:a=t.sent,A(a.tutorials),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t(),a(),r(),i()}),[E,e]);var J=Object(o.useHistory)(),L=function(){var a=Object(c.a)(n.a.mark((function a(r,c){var i,l;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r.link&&(r.link.split("v=")[1]?(i=r.link.split("v=")[1],-1!==(l=i.indexOf("&"))&&(i=i.substring(0,l))):i=r.link),a.next=4,E("/api/tweektabs/tutorials/".concat(e),"PATCH",JSON.stringify({chanteur:r.chanteur,link:i,name:r.name,tab:r.tab,description:r.description,type:r.type,difficulty:r.difficulty,instrument:r.instrument}),{"Content-Type":"application/json",Authorization:"Bearer "+t.token});case 4:c.isSubmitting=!1,c.resetForm(),m.b.success("\ud83e\udd84 Tutoriel mit \xe0 jour!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),J.push("/tutorials"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.error(a.t0),m.b.error("An error occurred!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t){return a.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(v.a,{error:y,onClear:g}),u.a.createElement("div",{className:"main main-edit"},u.a.createElement(f.a,{className:"card-edit"},w&&O&&V&&P&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",{className:"title-edit"},"Mettre \xe0 jour"),u.a.createElement(l.b,{onSubmit:L,initialValues:{link:P.link,tab:P.tab,chanteur:P.chanteur,file:P.file,name:P.name,type:P.type.id,description:P.description,difficulty:P.difficulty.id,instrument:P.instrument.id},validationSchema:a},(function(e){var t=e.values,a=e.errors,r=e.touched,n=e.handleChange,c=e.handleBlur,i=e.handleSubmit,s=e.isSubmitting;e.setFieldValue;return u.a.createElement("form",{onSubmit:i,className:"edit-form"},u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{className:"edit-control",type:"text",name:"chanteur",onChange:n,onBlur:c,value:t.chanteur,placeholder:"chanteur"}),u.a.createElement("div",{className:"error"},a.chanteur&&r.chanteur&&a.chanteur)),u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{className:"edit-control",type:"text",name:"name",onChange:n,onBlur:c,value:t.name,placeholder:"Nom"}),u.a.createElement("div",{className:"error"},a.name&&r.name&&a.name)),u.a.createElement("div",{className:"form-group"},u.a.createElement("textarea",{className:"edit-control",type:"text",name:"description",onChange:n,onBlur:c,value:t.description,placeholder:"Description"}),u.a.createElement("div",{className:"error"},a.description&&r.description&&a.description)),u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{name:"link",className:"edit-control",type:"text",onChange:n,onBlur:c,values:t.link,placeholder:"Lien video"}),u.a.createElement("div",{className:"error"},a.link&&r.link&&a.link)),u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{name:"tab",className:"edit-control",type:"text",onChange:n,onBlur:c,values:t.tab,placeholder:"Lien tablature"}),u.a.createElement("div",{className:"error"},a.tab&&r.tab&&a.tab)),O&&O.length>0&&u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{className:"edit-control",as:"select",name:"type",onChange:n,onBlur:c,value:t.type,placeholder:"type"},u.a.createElement("option",{value:""},"Choisit un type"),O.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement("div",{className:"error"},a.type&&r.type&&a.type)),V&&V.length>0&&u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{className:"edit-control",as:"select",name:"instrument",onChange:n,onBlur:c,value:t.instrument,placeholder:"instrument"},u.a.createElement("option",{value:""},"Choisit une instrument"),V.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement("div",{className:"error"},a.instrument&&r.instrument&&a.instrument)),w&&w.length>0&&u.a.createElement("div",{className:"form-group"},u.a.createElement(l.a,{className:"edit-control",as:"select",name:"difficulty",onChange:n,onBlur:c,value:t.difficulty,placeholder:"Difficult\xe9"},u.a.createElement("option",{value:""},"Choisit une difficult\xe9"),w.map((function(e,t){return u.a.createElement("option",{key:t,value:e.id},e.name)}))),u.a.createElement("div",{className:"error"},a.difficulty&&r.difficulty&&a.difficulty)),u.a.createElement("div",{className:"form-group"},u.a.createElement(d.a,{type:"submit",disabled:s},"Mettre \xe0 jour")))}))))))}}}]);
//# sourceMappingURL=14.9404376f.chunk.js.map