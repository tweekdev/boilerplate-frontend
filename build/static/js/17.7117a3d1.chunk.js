(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[17],{571:function(e,a,r){"use strict";r.r(a);var t=r(3),n=r.n(t),s=r(9),l=r(6),o=r(432),m=r(12),c=r(0),i=r.n(c),u=r(25),p=r(13),d=r(11),f=r(19),h=r(27),E=r(20),v=r(47),g=r(18),N=r(15);r(65);a.default=function(){var e=d.a().shape({pseudo:d.c().required("Veuillez entrer un pseudo.").min(4,"Le pseudo est trop court."),firstname:d.c().required("Veuillez entrer un pr\xe9nom."),name:d.c().required("Veuillez entrer un nom."),email:d.c().email("Email invalide.").required("Veuillez entrer un Email."),picture:d.c().required("Veuillez ins\xe9rer une image."),password:d.c().required("Veuillez entrer un mot de passe.").min(6,"Le mot de passe est trop court 6 caract\xe8res minimum.")}),a=Object(N.a)(),r=a.isLoading,t=a.error,b=a.sendRequest,w=a.clearError,S=Object(c.useContext)(g.a),y=Object(u.useHistory)(),C=Object(c.useState)(!1),x=Object(l.a)(C,2),V=x[0],j=x[1],k=function(){var e=Object(s.a)(n.a.mark((function e(a,r){var t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("name",a.name),t.append("firstname",a.firstname),t.append("pseudo",a.pseudo),t.append("email",a.email),t.append("password",a.password),t.append("picture",a.picture),t.append("tabs",[]),t.append("news",[]),e.next=12,b("/api/tweektabs/users/signup","POST",t);case 12:s=e.sent,S.login(s.userId,s.token,s.role[0],s.pseudo,s.picture),r.isSubmitting=!1,r.resetForm(),y.push("/tabs"),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(0);case 21:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(a,r){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"main auth-page signup"},i.a.createElement(E.a,{error:t,onClear:w}),r?i.a.createElement(v.a,{asOverlay:!0}):i.a.createElement(h.a,{className:"authentication"},i.a.createElement("h2",{className:"title__auth"},"S'inscrire"),i.a.createElement(m.b,{onSubmit:k,initialValues:{pseudo:"",firstname:"",name:"",password:"",email:"",role:"",picture:""},validationSchema:e},(function(e){var a=e.values,r=e.errors,t=e.touched,n=e.handleChange,s=e.handleBlur,l=e.handleSubmit,c=e.isSubmitting,u=e.setFieldValue;return i.a.createElement("form",{onSubmit:l},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{id:"picture",name:"picture",className:"form-control",type:"file",onChange:function(e){u("picture",e.currentTarget.files[0])},values:a.picture,accept:".jpg,.png,.jpeg"}),i.a.createElement("div",{className:"error"},r.picture&&t.picture&&r.picture)),i.a.createElement("div",{className:"form-group"},i.a.createElement(m.a,{className:"form-control",type:"text",name:"pseudo",onChange:n,onBlur:s,value:a.pseudo,placeholder:"Pseudo"}),i.a.createElement("div",{className:"error"},r.pseudo&&t.pseudo&&r.pseudo)),i.a.createElement("div",{className:"form-group"},i.a.createElement(m.a,{className:"form-control",type:"text",name:"firstname",onChange:n,onBlur:s,value:a.firstname,placeholder:"Pr\xe9nom"}),i.a.createElement("div",{className:"error"},r.firstname&&t.firstname&&r.firstname)),i.a.createElement("div",{className:"form-group"},i.a.createElement(m.a,{className:"form-control",type:"text",name:"name",onChange:n,onBlur:s,value:a.name,placeholder:"Nom"}),i.a.createElement("div",{className:"error"},r.name&&t.name&&r.name)),i.a.createElement("div",{className:"form-group"},i.a.createElement(m.a,{className:"form-control",type:"text",name:"email",onChange:n,onBlur:s,value:a.email,placeholder:"Email"}),i.a.createElement("div",{className:"error"},r.email&&t.email&&r.email)),i.a.createElement("div",{className:"form-group show-password-auth-check"},i.a.createElement(m.a,{className:"form-control",type:V?"text":"password",name:"password",onChange:n,onBlur:s,value:a.password,placeholder:"Mot de passe"}),i.a.createElement(o.a,{onClick:function(){return j(!V)}}),i.a.createElement("label",{className:"show-password-auth"},"Voir le mot de passe"),i.a.createElement("div",{className:"error"},r.password&&t.password&&r.password)),i.a.createElement("div",{className:"form-group"},i.a.createElement(f.a,{type:"submit",disabled:c},"Soumettre")))})),i.a.createElement(p.b,{className:"User-add",to:"/auth"},"Se connecter")))}}}]);
//# sourceMappingURL=17.7117a3d1.chunk.js.map